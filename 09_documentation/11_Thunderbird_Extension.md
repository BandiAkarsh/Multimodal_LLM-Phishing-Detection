# Thunderbird Phishing Guard Extension

## Overview

The **Thunderbird Phishing Guard** is a MailExtension designed for Mozilla Thunderbird (compatible with version 102+). It provides real-time protection by analyzing URLs in incoming emails using the project's backend API.

## Features

- **Real-time Monitoring**: Automatically scans new emails as they arrive.
- **URL Extraction**: Extracts all links from both plain text and HTML email bodies.
- **In-Email Banners**: Injects color-coded warning banners directly into the email display.
- **Security Popup**: Offers a detailed breakdown of the email's safety status.
- **Actionable Advice**: Provides clear instructions (e.g., "Do not click", "Verify sender") based on classification.

## Classification Categories

The extension uses the same 4-category system as the backend:

- **LEGITIMATE** (Green): Verified safe.
- **PHISHING** (Red): Malicious impersonation or credential theft.
- **AI_GENERATED** (Orange): Likely generated by an LLM for phishing.
- **PHISHING_KIT** (Dark Red): Uses known toolkits like Gophish or Evilginx2.

## Installation

1.  Open Mozilla Thunderbird.
2.  Go to **Add-ons and Themes** > **Extensions**.
3.  Click the gear icon and select **Install Add-on From File...**.
4.  Select the `thunderbird-phishing-guard.zip` (or the folder if in debug mode).

## Configuration

The extension communicates with the backend API. By default, it looks for:
`http://localhost:8000/api/v1/analyze`

You can change the API endpoint in the **Extension Options** page.

## Technical Structure

- `manifest.json`: Extension metadata and permissions.
- `background.js`: Monitors messages and coordinates analysis.
- `lib/api_client.js`: Handles communication with the Python backend.
- `content_scripts/inject_banner.js`: Manages DOM manipulation in the email view.
- `popup/`: The user interface for detailed analysis.
- `lib/constants.js`: Shared classification constants ensuring consistency with the backend.
